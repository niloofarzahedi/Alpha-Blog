<h1>Chats#show</h1>
<p>Find me in app/views/chats/show.html.erb</p>

<div id="chat-container">
    <h2>Chat Room</h2>
    <div id="messages" style="border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll;">
        <!-- Messages will appear here -->
    </div>
    <form id="message-form">
        <input type="text" id="message-input" placeholder="Type your message..." style="width: 80%;" />
        <button type="submit">Send</button>
    </form>
</div>

<script>
    const messagesContainer = document.getElementById('messages');
    const messageForm = document.getElementById('message-form');
    const messageInput = document.getElementById('message-input');

    // Function to add a message to the chat
    function addMessage(content) {
        const messageElement = document.createElement('p');
        messageElement.textContent = content;
        messagesContainer.appendChild(messageElement);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Handle sending a new message
    messageForm.addEventListener('submit', (event) => {
        event.preventDefault();
        const message = messageInput.value.trim();
        if (message) {
            // Send the message to the server via ActionCable
            App.chatChannel.send({ content: message });
            messageInput.value = '';
        }
    });

    // Subscribe to the chat channel
    document.addEventListener('DOMContentLoaded', () => {
        App.chatChannel = App.cable.subscriptions.create("ChatChannel", {
            received(data) {
                addMessage(data.content);
            }
        });
    });
</script>
